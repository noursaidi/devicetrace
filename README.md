# devicetrace

Update device config (and publish to topic so it's in the traces)
`python3 config.py PROJECT_ID AHU-1 ZZ-TRI-FECTA  us-central1 udmi_target config1.json`

View PUB/SUB Message log and store messages for given device ID's (will match ANY device with the device ID)
`python3 trace.py PROJECT_ID gama2 AHU-1 `
`python3 trace.py PROJECT_ID gama2 GAT-100,ACT-1 .`

```
2022-09-01 14:03:29.407000+00:00  GAT-100    ZZ-TRI-FECTA    event_pointset
2022-09-01 14:03:34.529000+00:00  GAT-100    ZZ-TRI-FECTA    event_system
2022-09-01 14:03:39.788000+00:00  GAT-100    ZZ-TRI-FECTA    state
2022-09-01 14:03:44.798000+00:00  ACT-1      ZZ-TRI-FECTA    event_pointset
2022-09-01 14:03:49.811000+00:00  ACT-1      ZZ-TRI-FECTA    event_system
2022-09-01 14:03:54.936000+00:00  ACT-1      ZZ-TRI-FECTA    state
2022-09-01 14:04:00.220000+00:00  GAT-100    ZZ-TRI-FECTA    event_pointset
2022-09-01 14:04:05.312000+00:00  GAT-100    ZZ-TRI-FECTA    event_system
```

View GCP Logs for given device ID's (refreshes every 10 seconds to try and keep items in order, but not always possible. Will match any device with the given device ID)
`python3 log.py daq1-273309 GAT-100,ACT-1`

```
2022-09-01 13:55:08.722019+00:00  GAT-100    ZZ-TRI-FECTA    CONFIG 
2022-09-01 13:55:21.609914+00:00  GAT-100    ZZ-TRI-FECTA    CONFIG 
2022-09-01 13:55:37.376224+00:00  GAT-100    ZZ-TRI-FECTA    CONFIG 
2022-09-01 13:55:50.828966+00:00  GAT-100    ZZ-TRI-FECTA    DISCONNECT 
2022-09-01 13:56:36.490871+00:00  GAT-100    ZZ-TRI-FECTA    CONNECT 
2022-09-01 13:56:41.336499+00:00  GAT-100    ZZ-TRI-FECTA    SUBSCRIBE /devices/GAT-100/config
2022-09-01 13:56:41.353778+00:00  GAT-100    ZZ-TRI-FECTA    SUBSCRIBE /devices/GAT-100/commands/#
2022-09-01 13:56:41.353999+00:00  GAT-100    ZZ-TRI-FECTA    SUBSCRIBE /devices/GAT-100/errors
2022-09-01 13:56:42.125524+00:00  GAT-100    ZZ-TRI-FECTA    PUBACK CONFIG
2022-09-01 13:56:42.125580+00:00  GAT-100    ZZ-TRI-FECTA    CONFIG 
2022-09-01 13:56:42.290466+00:00  GAT-100    ZZ-TRI-FECTA    PUBLISH STATE
2022-09-01 13:56:42.421195+00:00  ACT-1      ZZ-TRI-FECTA    ATTACH_TO_GATEWAY GAT-100
2022-09-01 13:56:47.195970+00:00  ACT-1      ZZ-TRI-FECTA    SUBSCRIBE /devices/ACT-1/config
2022-09-01 13:56:47.212115+00:00  ACT-1      ZZ-TRI-FECTA    SUBSCRIBE /devices/ACT-1/commands/#
2022-09-01 13:56:47.431395+00:00  ACT-1      ZZ-TRI-FECTA    PUBACK CONFIG
2022-09-01 13:56:47.431455+00:00  ACT-1      ZZ-TRI-FECTA    CONFIG 
2022-09-01 13:56:47.747751+00:00  GAT-100    ZZ-TRI-FECTA    PUBLISH EVENTS
2022-09-01 13:56:53.220930+00:00  GAT-100    ZZ-TRI-FECTA    PUBLISH EVENTS
2022-09-01 13:56:58.286947+00:00  GAT-100    ZZ-TRI-FECTA    PUBLISH STATE
2022-09-01 13:57:34.263879+00:00  ACT-1      ZZ-TRI-FECTA    PUBLISH EVENTS
```